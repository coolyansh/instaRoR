<!DOCTYPE html>
<html>
  <head>
    <title>InstaRoR</title>
    <%= csrf_meta_tags %>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <%= yield %>
    <script type="text/javascript">
      if( $('.pagination').length && $('#posts').length )
      {
        $(window).scroll(function(){
          more_posts_url = $('.pagination .next_page').attr('href')
            if(more_posts_url && ($(window).scrollTop() == $(document).height() - $(window).height() ) )
            {
              $('.pagination').html('<p> Loading older posts ........ </p>')
              $.getScript(more_posts_url)
            }
        });
      }
    </script>
  </body>
</html>
